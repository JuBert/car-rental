import{d as C,O as B,Q as W,r as I,k as O,R as N,x as a,y as o,z as s,A as c,P as x,M as f,N as D,K as S,q as $,S as P,B as R,T as V}from"./Dip7JFBX.js";const j={class:"w-full mx-auto p-4"},A={class:"flex items-center justify-between mb-4"},H={class:"font-semibold text-lg"},Y={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-2"},q={class:"font-medium mb-1"},z={class:"mb-2"},E={key:0,class:"w-full"},K=["onClick"],L={key:1,class:"w-full mt-1"},Q=["onClick"],G=C({__name:"WeeklyCalendar",setup(F){const d=B(),l=W();function m(n){const e=new Date(n),t=e.getDay(),p=t===0?-6:1-t;return e.setDate(e.getDate()+p),e.setHours(0,0,0,0),e}function i(n,e){const t=new Date(n);return t.setDate(t.getDate()+e),t.setHours(0,0,0,0),t}const v=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],y=l.value?new Date(l.value):new Date(2020,0,6),r=I(m(y)),g=O(()=>Array.from({length:7},(n,e)=>i(r.value,e)));function k(){r.value=i(r.value,-7)}function h(){r.value=i(r.value,7)}function b(n,e){const t=new Date(n);return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function _(n,e){return d.value?d.value.bookings.filter(t=>b(e==="pickup"?t.startDate:t.endDate,n)):[]}const M=N().params.stationId,w=(n,e)=>{l.value=e==="pickup"?new Date(n.startDate).toDateString():new Date(n.endDate).toDateString(),$({path:`/station/${M}/booking/${n.id}`})};return(n,e)=>(o(),a("div",j,[s("div",A,[s("button",{onClick:k,class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300"}," ← "),s("div",H," Week of "+c(x(g)?.[0]?.toDateString()),1),s("button",{onClick:h,class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300"}," → ")]),s("div",Y,[(o(!0),a(f,null,D(x(g),(t,p)=>(o(),a("div",{key:p,class:"flex flex-col items-center p-2 shadow rounded min-h-[200px] bg-white"},[s("div",q,c(v[p]),1),s("div",z,c(t.getDate())+"/"+c(t.getMonth()+1),1),_(t,"pickup").length?(o(),a("div",E,[e[0]||(e[0]=s("div",{class:"text-xs font-semibold text-green-600"}," Pickups: ",-1)),s("ul",null,[(o(!0),a(f,null,D(_(t,"pickup"),u=>(o(),a("li",{key:u.id,class:"text-xs truncate cursor-pointer hover:underline",onClick:T=>w(u,"pickup")},c(u.customerName),9,K))),128))])])):S("",!0),_(t,"return").length?(o(),a("div",L,[e[1]||(e[1]=s("div",{class:"text-xs font-semibold text-blue-600"}," Returns: ",-1)),s("ul",null,[(o(!0),a(f,null,D(_(t,"return"),u=>(o(),a("li",{key:u.id,class:"text-xs truncate cursor-pointer hover:underline",onClick:T=>w(u,"return")},c(u.customerName),9,Q))),128))])])):S("",!0)]))),128))])]))}}),J=Object.assign(G,{__name:"WeeklyCalendar"}),U={key:1},ee=C({__name:"[stationId]",setup(F){const d=N(),l=B(),m=W(),i=()=>{l.value=void 0,m.value=void 0},v=()=>{i(),$({path:"/"})};return(y,r)=>{const g=V,k=J;return x(d).params.bookingId?(o(),P(g,{key:0})):(o(),a("div",U,[s("button",{class:"mb-4 mx-4 px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:r[0]||(r[0]=h=>v())}," ← Back "),R(k)]))}}});export{ee as default};
