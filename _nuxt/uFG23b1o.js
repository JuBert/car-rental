import{d as b,r as p,I as w,x as a,y as n,J as C,K as _,L as S,z as f,M as $,N as k,A as x,O as U,n as I,B as T,P as L,q as N}from"./Dip7JFBX.js";const A={class:"relative w-64"},B=["placeholder"],M={key:0,class:"absolute z-10 bg-white border border-gray-300 w-full mt-1 rounded shadow"},V=["onClick"],j={key:1,class:"absolute right-2 top-2 text-gray-400 text-xs"},z={key:2,class:"text-red-500 mt-2 text-sm"},D=b({__name:"AutoCompleteInput",props:{apiUrl:{},errorMessage:{},placeholder:{}},emits:["select"],setup(h,{emit:m}){const l=h,r=p(""),s=p([]),c=p(!1),e=p(""),u=m;let i=null;const v=async t=>{try{const d=`${l.apiUrl}?search=${encodeURIComponent(t)}`,o=await $fetch(d);s.value=o.filter(g=>g.name.toLowerCase().includes(t.toLowerCase()))}catch{e.value=l.errorMessage||"Error fetching",s.value=[]}};w(r,t=>{if(i&&clearTimeout(i),e.value="",!t){s.value=[],e.value="";return}i=setTimeout(async()=>{c.value=!0,v(t),c.value=!1},300)});const y=t=>{r.value=t.name,s.value=[],e.value="",u("select",t)};return(t,d)=>(n(),a("div",A,[C(f("input",{"onUpdate:modelValue":d[0]||(d[0]=o=>r.value=o),type:"text",placeholder:t.placeholder||"Search...",class:"border border-gray-300 rounded px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-400 transition"},null,8,B),[[S,r.value]]),s.value.length?(n(),a("ul",M,[(n(!0),a($,null,k(s.value,o=>(n(),a("li",{key:o.id,onClick:g=>y(o),class:"px-4 py-2 hover:bg-blue-100 cursor-pointer"},x(o.name),9,V))),128))])):_("",!0),c.value?(n(),a("div",j," Loading... ")):_("",!0),e.value?(n(),a("div",z,x(e.value),1)):_("",!0)]))}}),E=Object.assign(D,{__name:"AutoCompleteInput"}),O={class:"flex items-center justify-center h-screen"},P={class:"max-w-md w-full mx-auto p-8 bg-white rounded shadow"},q=b({__name:"index",setup(h){const m=I(),l=U(),r=p(`${m.public.baseUrl}/stations`),s=e=>{l.value=e,c()},c=()=>{if(l.value){const e=l.value?.id;N({path:`/station/${e}`})}};return(e,u)=>{const i=E;return n(),a("div",O,[f("div",P,[u[1]||(u[1]=f("h1",{class:"text-2xl font-bold text-blue-700 mb-6 text-center"}," Select the station ",-1)),T(i,{class:"w-full","api-url":L(r),placeholder:"Search for a station","error-message":"No stations found",onSelect:u[0]||(u[0]=v=>s(v))},null,8,["api-url"])])])}}});export{q as default};
