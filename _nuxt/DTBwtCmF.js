import{d as b,O as M,Q as T,r as $,k as I,R as w,x as a,y as o,z as s,A as u,M as m,N as k,K as y,q as O,S as h,P,T as R}from"./DN11Md4-.js";const j={class:"w-full mx-auto p-4"},A={class:"flex items-center justify-between mb-4"},H={class:"font-semibold text-lg"},V={class:"grid grid-cols-7 gap-2"},Y={class:"font-medium mb-1"},q={class:"mb-2"},z={key:0,class:"w-full"},E=["onClick"],K={key:1,class:"w-full mt-1"},L=["onClick"],Q=b({__name:"WeeklyCalendar",setup(S){const i=M(),d=T();function v(n){const e=new Date(n),t=e.getDay(),p=t===0?-6:1-t;return e.setDate(e.getDate()+p),e.setHours(0,0,0,0),e}function c(n,e){const t=new Date(n);return t.setDate(t.getDate()+e),t.setHours(0,0,0,0),t}const g=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],C=d.value?new Date(d.value):new Date(2020,0,6),l=$(v(C)),f=I(()=>Array.from({length:7},(n,e)=>c(l.value,e)));function W(){l.value=c(l.value,-7)}function B(){l.value=c(l.value,7)}function D(n,e){const t=new Date(n);return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function _(n,e){return i.value?i.value.bookings.filter(t=>D(e==="pickup"?t.startDate:t.endDate,n)):[]}const N=w().params.stationId,x=(n,e)=>{d.value=e==="pickup"?new Date(n.startDate).toDateString():new Date(n.endDate).toDateString(),O({path:`/station/${N}/booking/${n.id}`})};return(n,e)=>(o(),a("div",j,[s("div",A,[s("button",{onClick:W,class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300"},"←"),s("div",H," Week of "+u(f.value?.[0]?.toDateString()),1),s("button",{onClick:B,class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300"},"→")]),s("div",V,[(o(!0),a(m,null,k(f.value,(t,p)=>(o(),a("div",{key:p,class:"flex flex-col items-center p-2 border rounded min-h-[200px]"},[s("div",Y,u(g[p]),1),s("div",q,u(t.getDate())+"/"+u(t.getMonth()+1),1),_(t,"pickup").length?(o(),a("div",z,[e[0]||(e[0]=s("div",{class:"text-xs font-semibold text-green-600"},"Pickups:",-1)),s("ul",null,[(o(!0),a(m,null,k(_(t,"pickup"),r=>(o(),a("li",{key:r.id,class:"text-xs truncate cursor-pointer hover:underline",onClick:F=>x(r,"pickup")},u(r.customerName),9,E))),128))])])):y("",!0),_(t,"return").length?(o(),a("div",K,[e[1]||(e[1]=s("div",{class:"text-xs font-semibold text-blue-600"},"Returns:",-1)),s("ul",null,[(o(!0),a(m,null,k(_(t,"return"),r=>(o(),a("li",{key:r.id,class:"text-xs truncate cursor-pointer hover:underline",onClick:F=>x(r,"return")},u(r.customerName),9,L))),128))])])):y("",!0)]))),128))])]))}}),G=Object.assign(Q,{__name:"WeeklyCalendar"}),X=b({__name:"[stationId]",setup(S){const i=w();return(d,v)=>{const c=R,g=G;return P(i).params.bookingId?(o(),h(c,{key:0})):(o(),h(g,{key:1}))}}});export{X as default};
